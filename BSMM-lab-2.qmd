---
title: "BSMM-lab-2"
subtitle: "BSMM 8740 Fall 2023"
author: "sophia-yi"
date: "25 September"
format: html
editor: visual
self-contained: true
---

## Setup

Load packages and data:

```{r load-pkg-data}
#| message: false
the_tate <- readr::read_delim("data/the-tate-collection.csv", ";", escape_double = FALSE, trim_ws = TRUE)
the_tate_artists <- readr::read_csv("data/the-tate-artists.csv")
```

```{r}
library(magrittr)     # the pipe
library(tidyverse)    # for data wrangling + visualization
library(tidymodels)   # for modeling
library(gt)           # for making display tables
library(gtExtras)     # helper functions for beautiful tables
library(DataExplorer) #
```

```{r}
the_tate <- readr::read_delim("data/the-tate-collection.csv", ";", escape_double = FALSE, trim_ws = TRUE)
the_tate_artists <- readr::read_csv("data/the-tate-artists.csv")
```

```         
```

## Exercises

### Exercise 1

The `the_tate` dataset has 3336 unique artists who worked from 1545 to 2012. The works were acquired between the years1823 and 2013.

```{r}
the_tate |> dplyr::summarise(
  artist=length(unique(artist)),
  min_year=min(year,na.rm = TRUE),
  max_year=max(year,na.rm = TRUE),
    min_acqyear=min(acquisitionYear,na.rm = TRUE),
  max_acqyear=max(acquisitionYear,na.rm = TRUE),
  
)
```

```{r}
the_tate |> DataExplorer::introduce()
```

```{r}
the_tate |> DataExplorer::plot_missing()
```

### Exercise 2

How number of works with missing dates is \_2583\_.

The number of artists whose works have missing dates is \_461\_.

It would require resolving missing year data for only \_\_ artists resolve resolve at least 50% of the missing data.

The missing year data likely to be classified as \_MAR\_\_\_.

```{r}
the_tate |> dplyr::filter(is.na(year)) |> dplyr::distinct(title)
```

```{r}
the_tate |> dplyr::filter(is.na(year)) |> dplyr::distinct(artist)

```

```{r}
the_tate |> dplyr::filter(is.na(year))

#table(qaz$artist) |> tibble::tibble()
```

### Exercise 3

The artist with the most works in the Tate collection is \_Turner\_\_.

The artist with the tenth-most works in the Tate collection is \_Warhol\_\_.

```{r}
the_tate |> dplyr::group_by(artist) |>
dplyr::mutate(n=dplyr::n()) |>
  dplyr::select(artist,n) |> 
  dplyr::arrange(desc(n)) |>
  dplyr::distinct() |> 
  dplyr::ungroup() |> 
  dplyr::slice(c(1,10))
```

### Exercise 4

The artist with the greatest number of works in the Tate collection represent \_56.91970\_\_% of the total

```{r}
the_tate %>%
  dplyr::group_by(artist) %>%
  dplyr::mutate(works_count = dplyr::n()) %>%
  dplyr::select(artist, works_count) %>%
  dplyr::arrange(desc(works_count)) %>%
  dplyr::distinct() %>%
  dplyr::ungroup() %>%
  dplyr::mutate(
    total = sum(works_count),
    pct = works_count / total
  )
```

### Exercise 5

There are \_23705\_ duplicate artist-title pairs

```{r}
library(dplyr)

# Select artist and title columns and count the number of rows
count_all_rows <- the_tate %>%
  select(artist, title) %>%
  nrow()

count_all_rows
```

```{r}
# Select artist and title columns and count distinct pairs
distinct_artist_title <- the_tate %>%
  select(artist, title) %>%
  distinct() %>%
  nrow()

distinct_artist_title
```

```{r}
duplicated_count <- count_all_rows - distinct_artist_title

duplicated_count
```

### Exercise 6

The artist with the largest work in the tate collection is Therrien, Robert.

The artist with the smallest work in the collection is Mesens, E.L.T.. The smallest work has area \_237\_\_ cm.

```{r}
library(dplyr)

# Add a new column "area" with the calculated area
the_tate <- the_tate %>%
  mutate(area = width * height)

# Select artist, title, and area, and remove NA values
selected_data <- the_tate %>%
  select(artist, title, area) %>%
  drop_na()

# Order the works by area in ascending order
selected_data <- selected_data %>%
  arrange(area)

# Find the largest artwork
largest_artwork <- selected_data %>%
  slice_tail(n = 1)

# Find the smallest artwork
smallest_artwork <- selected_data %>%
  slice_head(n = 1)

# View the largest and smallest artworks
print("Largest Artwork:")
print(largest_artwork)

print("Smallest Artwork:")
print(smallest_artwork)

```

### Exercise 7

```{r}
library(dplyr)

# Left join the_tate and the_tate_artists
the_tate <- left_join(the_tate, the_tate_artists, by = c("artistId" = "id"))

# Drop rows with NA gender values
the_tate <- the_tate %>%
  filter(!is.na(gender))
# Group by gender
grouped_data <- the_tate %>%
  group_by(gender)

# Show the resulting table
grouped_data
```

### Exercise 8

The annual return in the SPX price in 2020 was \_\_\_%.

The corresponding price volatility was \_\_\_%.

### Exercise 9

The period volatility was \_\_\_.\_%

### 
